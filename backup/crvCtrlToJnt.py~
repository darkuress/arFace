import maya.cmds as cmds
def crvCtrlToJnt ( lidCtl, jnt, wideJnt, POC, wideJntPOC, ctlPOC, initialX, RotateScale ,miValue, index ):   
    
    #connect browCtrlCurve and controller to the brow joints
    ctlMult = cmds.shadingNode ( 'multiplyDivide', asUtility=True, n = jnt.split('BlinkJnt', 1)[0] +'CtlMult'+ str(index) )
    wideJntMult = cmds.shadingNode ( 'multiplyDivide', asUtility=True, n = jnt.split('BlinkJnt', 1)[0] +'wideJntMult'+ str(index) )
    plusXAvg = cmds.shadingNode ( 'plusMinusAverage', asUtility=True, n = jnt.split('BlinkJnt', 1)[0] +'PlusX'+ str(index))
    wideJntAddX = cmds.shadingNode ( 'addDoubleLinear', asUtility=True, n = jnt.split('BlinkJnt', 1)[0] +'wideJntAddX'+ str(index) )
    plusYAvg = cmds.shadingNode ( 'plusMinusAverage', asUtility=True, n = jnt.split('BlinkJnt', 1)[0] +'PlusY'+ str(index))
    totalY = cmds.shadingNode ( 'addDoubleLinear', asUtility=True, n = jnt.split('BlinkJnt', 1)[0] +'YAdd'+ str(index))
    blinkRemap = cmds.shadingNode ( 'remapValue', asUtility=True, n = jnt.split('BlinkJnt', 1)[0] +'Remap'+ str(index))
    
    #TranslateX add up
    #1. curve translateX add up 
    cmds.setAttr ( plusXAvg + '.operation', 1 ) 
    cmds.connectAttr ( POC + '.positionX', plusXAvg + '.input1D[0]') 
    cmds.setAttr ( plusXAvg + '.input1D[1]', -initialX )
    cmds.connectAttr ( ctlPOC + '.positionX', plusXAvg + '.input1D[2]') 
    cmds.setAttr ( plusXAvg + '.input1D[3]', -initialX ) 
    cmds.connectAttr ( wideJntPOC + '.positionX', wideJntAddX + '.input1') 
    cmds.setAttr ( wideJntAddX + '.input2', -initialX ) 
    cmds.connectAttr ( wideJntAddX + '.output', plusXAvg + '.input1D[4]')
    #2. add miro control translateX 
    cmds.connectAttr ( lidCtl[0] + '.tx', plusXAvg + '.input1D[5]')
    #3. multiply XRotateScale
    cmds.connectAttr ( plusXAvg + '.output1D', ctlMult + '.input1X')
    cmds.setAttr ( ctlMult + '.input2X', miValue * RotateScale )
    cmds.connectAttr ( wideJntAddX + '.output', wideJntMult + '.input1X')
    cmds.setAttr ( wideJntMult + '.input2X', miValue * RotateScale )
    
    #4. connect jnt rotateY
    cmds.connectAttr ( ctlMult + '.outputX', jnt + '.ry' ) 
    cmds.connectAttr ( wideJntMult + '.outputX', wideJnt + '.ry')   
        
    # translateY add up
    #1. curve translateY add up 
    cmds.setAttr ( plusXAvg + '.operation', 1 )
    cmds.connectAttr ( POC + '.positionY', plusYAvg + '.input1D[0]')
    cmds.connectAttr ( ctlPOC + '.positionY', plusYAvg + '.input1D[1]')
    cmds.connectAttr ( wideJntPOC + '.positionY', plusYAvg + '.input1D[2]') 
    #2. add miro control translateY 
    cmds.connectAttr ( lidCtl[0] + '.ty', plusYAvg + '.input1D[3]')
    
    #3. multiply YRotateScale
    cmds.connectAttr ( plusYAvg + '.output1D', ctlMult + '.input1Y')
    cmds.setAttr ( ctlMult + '.input2Y', -RotateScale )
    cmds.connectAttr ( wideJntPOC + '.positionY', wideJntMult + '.input1Y')
    cmds.setAttr ( wideJntMult + '.input2Y', -RotateScale )   
    #4. connect jnt rotateX
    cmds.connectAttr ( ctlMult + ".outputY", blinkRemap + '.outputMin') 
    cmds.connectAttr ( blinkRemap + '.outValue',  jnt + '.rx')
    cmds.connectAttr ( wideJntMult + '.outputY', wideJnt + '.rx')
